# readme

## sms数据结构

```
_id: 序号，不能作为唯一值，删除后可能再次生成
thread_id: 对话
address: 对方号码
person: 对方名称，如果不存在通讯录为null
date: 时间戳(13位)，可以将此作为阈值
date_sent: 
protocol: 协议 0、SMS_PROTO, 1、MMS_PROTO
read: 读取状态 0 表示未读 1表示已读
status: 状态 -1接收，0完成，64等待，128失败
type: 1表示接收 2表示发出
reply_path_present: 
subject: 
body: 内容
service_center: 短信服务中心号码编号
locked: 
sub_id: 
error_code: 
creator: 
seen: 
```

## todo

* 定时清理短信

## 插件使用说明

一、首次安装插件，需要先`设置权限`，允许以下权限：

1. 读取短信
2. 通知类短信(小米)
3. 读取彩信
4. 访问网络(此权限一般默认都会有，可能不会显示在列表)

二、为保证程序不被系统杀死，最好锁定插件：

1. `小米`:点击功能键=>可以看到正在运行的应用=>向下滑动本插件
2. `魅族`:屏幕底部向上滑动=>可以看到正在运行的应用=>向下滑动本插件=>点击锁定按钮
3. `其他手机`:差不多一样的道理吧，有些手机也可以在自带的"安全中心"之类的软件中操作白名单

三、进入本插件后，连续点击5次屏幕下方空白处方可进入主页面；

四、插件配置：

1. `API地址`：非特殊情况，请保持默认状态即可；

2. `用户名`：填写网站后台账号的"别名"；

> 注：如果手机号码对应多个银行卡，后台添加账号时候，`别名`需要设置成一样的，即与本插件的`用户名`保持一致。

3. `启用文件日志`：若插件一切运行正常，请勿启用；启用后插件会实时将日志写入文件，降低效率；

> 注：启用与否不影响`查看日志`功能

4. `启用短信监控`：只有启用才会上传数据到服务器，非特殊情况请勿禁用；

5. `检查更新`：连续点击5次检查更新，如果有新的版本，将自动跳转到浏览器下载；

五、点击`开启服务`，插件将实时将短信数据上传到服务器；点击`停止服务`，插件将不会读取短信；

六、`查看日志`：显示最新100条日志，与`启用文件日志`无关；

1. `导出日志`：只有`启用文件日志`为启用状态才会生成文件日志，点击`导出日志`将会将日志导出到SD卡`Android/data/com.example.payhelper/files`下；

2. `清理日志`：清理今天以外的日志文件；

